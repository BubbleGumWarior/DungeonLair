<div *ngIf="!isOpen" class="fixed bottom-4 left-4">
  <button
    [ngClass]="{'bg-red-500': isNewMessage, 'bg-purple-500': !isNewMessage}"
    class="chat-button p-3 text-black rounded-full shadow-lg hover:bg-purple-600 transition duration-200"
    (click)="toggleChat()"
  >
    <i class="fas fa-comment"></i>
  </button>
</div>

<div *ngIf="isOpen" class="chat-modal fixed bottom-4 left-16 bg-stone-950 shadow-lg rounded-lg border border-purple-500 w-1/3 h-1/2">
  <div class="p-4 h-full">
    <h2 class="font-bold h-min mb-2 text-purple-500">Chat</h2>
    <div class="chat-history h-5/6 overflow-y-auto border-b border-black mb-2">
      <div #scrollContainer *ngFor="let chat of chatHistory" class="message p-2 bg-gradient-to-r from-purple-400 via-purple-500 to-purple-600 mr-4">
        <strong>{{ chat.username }}:</strong> {{ chat.message }}
      </div>
    </div>
    <form (ngSubmit)="sendMessage()" class="flex">
      <input
        type="text"
        placeholder="Type a message..."
        [(ngModel)]="messageValue"  
        name="message" 
        class="flex-1 bg-gradient-to-r from-purple-400 via-purple-500 to-purple-600 rounded p-2 mr-2 text-black placeholder-black"
      />
      <button type="submit" class="send-button bg-gradient-to-r from-purple-400 via-purple-500 to-purple-600 text-black rounded p-2">
        Send
      </button>
    </form>
  </div>
</div>
